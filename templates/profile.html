<!DOCTYPE html>
<html>
    <head>
            <meta charset="utf-8">
            <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
            <meta http-equiv="x-ua-compatible" content="ie=edge">
            <script defer src="https://use.fontawesome.com/releases/v5.0.2/js/all.js"></script>    
            <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
            <link rel="stylesheet" href="{{ url_for('static',filename='css/styles.css') }}">
        <title>
            Industrify | Profile
        </title>
        <style type="text/css">
            .label{text-align: right}
            .error{color:red;}
        </style>
    </head>
    <body>
            <nav class = "navbar navbar-dark navbar-expand-sm fixed-top">
                    <div class = "container">
                        <button class = "navbar-toggler" type = "button" data-toggle = "collapse" data-target = "#NavBar">
                            <span class = "navbar-toggler-icon"></span>
                        </button>
                        <div class = "collapse navbar-collapse" id="NavBar">
                            <ul class = "navbar-nav mr-auto">
                                <li class = "nav-item">
                                    <a class = "nav-link active" href = "#"><span class = "fa fa-home fa-lg"></span> {{user.username}}</a>
                                </li>
                            </ul>
                            <span class = "navbar-text">
                                <a id = "loginButton" href = "{{url_for('logout')}}">
                                    <span class = "fa fa-sign-in"></span> Log Out
                                </a>
                            </span>
                        </div>
                    </div>
            </nav>

        <div class = "container">
                <div class = "row">
                        <div class = "col-12 col-sm-12">
                            <hr>
                           <h3>Products</h3>
                           <hr>
                        </div>
                    </div>

            <div class = "row row content">
                <div class = "col-12 col-sm-10 offset-sm-1">
                    <form action = "{{url_for('profile')}}" method = "POST">
                        <div class = "form-group row">
                            <label class = "col-md-2 col-form-group"><strong>Filter</strong></label>
                            <select class = "form-control col-md-4" name = "category">
                                <option value = "">All</option>
                                <option value = "Household">Household</option>
                                <option value = "Electronics">Electronics</option>
                            </select>
                            <input type = "submit" class = "form-control col-md-3 bg-primary text-white" value = "Apply">
                        </div>
                    </form>
                </div>
            </div>
            <hr>
            <div class = "row row-content">
                <div class = "col-12 col-sm-8 offset-sm-2">
                    <div class = "table-responsive">
                        <table class = "table table-striped">
                            <thead class = "thead-dark">
                                <tr>
                                    <th>Products Name</th>
                                    <th>Category</th>
                                    <th>Total Hits</th>
                                    <th>User Hits</th>
                                </tr>
                            </thead>
                            <tbody>
                                {% for i in products %}
                                <tr>
                                    <th>
                                            <a href = "{{url_for('modify', pid = i.id, uid = user.id)}}">{{i.name}}</a>
                                    </th>
                                    <td>
                                        {{i.category}}
                                    </td>
                                    <td>
                                        {{i.thits}}
                                    </td>
                                    <td>
                                        {{i.uhits}}
                                    </td>
                                </tr>
                                {% endfor %}
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
        
        <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
        <script>
            $(document).ready(function(){
                $("#mycarousel").carousel( { interval: 2000 } );
                $("#carouselButton").click(function(){
                if ($("#carouselButton").children("span").hasClass('fa-pause')) {
                    $("#mycarousel").carousel('pause');
                    $("#carouselButton").children("span").removeClass('fa-pause');
                    $("#carouselButton").children("span").addClass('fa-play');
                }
                else if ($("#carouselButton").children("span").hasClass('fa-play')){
                    $("#mycarousel").carousel('cycle');
                    $("#carouselButton").children("span").removeClass('fa-play');
                    $("#carouselButton").children("span").addClass('fa-pause');                    
                }
                });
                $("#loginButton").click(function(){
                    $("#loginModal").modal({
                        show: true
                    });
                });
                });
        </script>
    </body>
</html>